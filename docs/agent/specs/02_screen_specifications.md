# 画面仕様書

## 1. 画面一覧

| 画面ID | 画面名 | 画面パス | 認証要否 |
|--------|--------|----------|----------|
| SC-001 | ログイン画面 | `/login` | 不要 |
| SC-002 | ユーザー登録画面 | `/register` | 不要 |
| SC-003 | マイ日記画面 | `/diary` | 必要 |
| SC-004 | みんなの日記画面 | `/public` | 不要 |

> **Next.js App Router 構成**  
> `app/login/page.tsx`, `app/register/page.tsx`, `app/diary/page.tsx`, `app/public/page.tsx` の形式でページを定義する。  
> ルートパス (`/`) は認証状態に応じて `/diary` または `/login` へリダイレクトする。

---

## 2. 共通要素

### 2.1 ヘッダー

#### 構成要素
```
[Diary Open Close] [📝 マイ日記] [🌍 みんなの日記] [🌙/☀️] [ユーザープロフィール]
```

#### 項目詳細

| 要素 | タイプ | 説明 | 表示条件 |
|------|--------|------|----------|
| アプリタイトル | テキスト/リンク | 「Diary Open Close」 | 常時表示 |
| マイ日記ボタン | リンクボタン | `/diary` へ遷移 | 常時表示 |
| みんなの日記ボタン | リンクボタン | `/public` へ遷移 | 常時表示 |
| ダークモード切り替え | トグルボタン | 🌙（ライトモード時）/ ☀️（ダークモード時） | 常時表示 |
| ユーザープロフィール | コンポーネント | 表示名、ログアウトボタン | ログイン時のみ |
| ログインボタン | リンクボタン | `/login` へ遷移 | 未ログイン時のみ |

#### レイアウト
- ヘッダー固定（スクロールしても画面上部に固定）
- レスポンシブデザイン対応
- モバイル表示時はボタンを縦並びまたはハンバーガーメニュー化

---

## 3. 画面詳細仕様

### SC-001: ログイン画面

#### 3.1.1 概要
- **目的**: ユーザー認証を行う
- **アクセス条件**: 全ユーザー（認証済みの場合は `/diary` へリダイレクト）
- **パス**: `/login`

#### 3.1.2 画面構成
```
┌─────────────────────────────────────┐
│ ヘッダー                              │
├─────────────────────────────────────┤
│                                     │
│        ログインフォーム               │
│                                     │
│   ┌───────────────────────┐         │
│   │  Diary Open Closeへ  │         │
│   │  ようこそ              │         │
│   │                       │         │
│   │ メールアドレス: [    ] │         │
│   │ パスワード:    [    ] │         │
│   │                       │         │
│   │      [ログイン]        │         │
│   │                       │         │
│   │ アカウントをお持ちでない方│        │
│   │ → [新規登録はこちら]   │         │
│   └───────────────────────┘         │
│                                     │
└─────────────────────────────────────┘
```

#### 3.1.3 UI要素

| 要素名 | タイプ | 説明 | バリデーション |
|--------|--------|------|--------------|
| メールアドレス | input[type=email] | ログイン用メールアドレス | 必須、メール形式 |
| パスワード | input[type=password] | ログイン用パスワード | 必須 |
| ログインボタン | button | 認証リクエスト送信 | フォーム送信 |
| 新規登録リンク | リンク | `/register` へ遷移 | - |

#### 3.1.4 遷移先
- **成功時**: SC-003（マイ日記画面 `/diary`）
- **失敗時**: エラーメッセージ表示（同画面に留まる）

---

### SC-002: ユーザー登録画面

#### 3.2.1 概要
- **目的**: 新規ユーザーアカウントを作成する
- **アクセス条件**: 未認証ユーザー（認証済みの場合は `/diary` へリダイレクト）
- **パス**: `/register`

#### 3.2.2 画面構成
```
┌─────────────────────────────────────┐
│ ヘッダー                              │
├─────────────────────────────────────┤
│                                     │
│        新規登録フォーム               │
│                                     │
│   ┌───────────────────────┐         │
│   │  新しいアカウントを作成 │         │
│   │                       │         │
│   │ 表示名:        [    ] │         │
│   │ メールアドレス: [    ] │         │
│   │ パスワード:    [    ] │         │
│   │ パスワード確認: [    ] │         │
│   │                       │         │
│   │      [登録する]        │         │
│   │                       │         │
│   │ すでにアカウントをお持ちの方      │
│   │ → [ログインはこちら]   │         │
│   └───────────────────────┘         │
│                                     │
└─────────────────────────────────────┘
```

#### 3.2.3 UI要素

| 要素名 | タイプ | 説明 | バリデーション |
|--------|--------|------|--------------|
| 表示名 | input[type=text] | ユーザーの表示名 | 必須、1文字以上 |
| メールアドレス | input[type=email] | 登録用メールアドレス | 必須、メール形式、重複不可 |
| パスワード | input[type=password] | 登録用パスワード | 必須、8文字以上 |
| パスワード確認 | input[type=password] | パスワード再入力 | 必須、パスワードと一致 |
| 登録ボタン | button | 登録リクエスト送信 | フォーム送信 |
| ログインリンク | リンク | `/login` へ遷移 | - |

#### 3.2.4 遷移先
- **成功時**: SC-003（マイ日記画面 `/diary`）
- **失敗時**: エラーメッセージ表示（同画面に留まる）

---

### SC-003: マイ日記画面

#### 3.3.1 概要
- **目的**: 自分の日記を作成・管理する
- **アクセス条件**: 認証済みユーザー（未認証の場合は `/login` へリダイレクト）
- **パス**: `/diary`

#### 3.3.2 画面構成
```
┌─────────────────────────────────────────────────┐
│ ヘッダー                                         │
├─────────────────────────────────────────────────┤
│ 【日記作成フォーム】                             │
│ ┌─────────────────────────────────────────────┐ │
│ │ 日付選択: [カレンダー]  天気: [☀️▼]          │ │
│ │                                              │ │
│ │ メインコンテンツ:                             │ │
│ │ ┌──────────────────────────────────────────┐ │ │
│ │ │ 今日のことを書いてください...              │ │ │
│ │ └──────────────────────────────────────────┘ │ │
│ │                                              │ │
│ │ 【詳細項目】                                  │ │
│ │ 📝 出来事: [テキストエリア]                   │ │
│ │ 💭 感情: [テキストエリア]                     │ │
│ │ 😊 よかったこと: [テキストエリア]             │ │
│ │ 🤔 反省点: [テキストエリア]                   │ │
│ │ 🙏 感謝したこと: [テキストエリア]             │ │
│ │ 🎯 明日の目標: [テキストエリア]               │ │
│ │ ✨ 明日の楽しみ: [テキストエリア]             │ │
│ │ 💡 学んだこと・気づき: [テキストエリア]       │ │
│ │ 💪 健康・習慣チェック: [テキストエリア]       │ │
│ │ 🏷️ 今日を一言で表すなら: [テキストエリア]     │ │
│ │                                              │ │
│ │ 画像: [ファイル選択] [プレビュー]             │ │
│ │ 音声: [ファイル選択] [再生コントロール]       │ │
│ │                                              │ │
│ │ 公開設定: ☑ この日記を公開する               │ │
│ │                                              │ │
│ │              [保存する]                       │ │
│ └─────────────────────────────────────────────┘ │
│                                                 │
│ 【日記一覧】                                     │
│ ┌─────────────────────────────────────────────┐ │
│ │ 2026年2月19日 (木) ☀️              [公開中]   │ │
│ │ ────────────────────────────────            │ │
│ │ 今日は素晴らしい一日でした...                 │ │
│ │                                              │ │
│ │ 📝 出来事: プロジェクト完了                   │ │
│ │ 💭 感情: 達成感がある                         │ │
│ │ ...                                          │ │
│ │                                              │ │
│ │ [画像サムネイル]                              │ │
│ │ [🔊 音声再生]                                 │ │
│ │                                              │ │
│ │         [公開/非公開切替] [削除]              │ │
│ └─────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────┘
```

#### 3.3.3 日記作成フォーム

##### カレンダーコンポーネント
- **表示形式**: 月単位のカレンダーグリッド
- **機能**:
  - 前月/次月への移動ボタン
  - 今日の日付をハイライト
  - 選択中の日付をハイライト
  - 日付クリックで選択
- **デフォルト値**: 今日の日付

##### 天気選択
- **表示形式**: ドロップダウン
- **選択肢**:
  - ☀️ 晴れ (`sunny`)
  - ☁️ 曇り (`cloudy`)
  - 🌧️ 雨 (`rainy`)
  - ❄️ 雪 (`snowy`)
  - ⛈️ 嵐 (`stormy`)
  - 🌫️ 霧 (`foggy`)
  - ⛅ 晴れ時々曇り (`partly-cloudy`)
  - 💨 風が強い (`windy`)
- **デフォルト値**: 未選択

##### メインコンテンツ
- **タイプ**: テキストエリア
- **プレースホルダー**: 「今日のことを書いてください...」
- **行数**: 5行程度（可変）
- **最大文字数**: 制限なし

##### 詳細項目（10項目）
各項目は折りたたみ可能なアコーディオン形式で表示

| アイコン | 項目名 | プレースホルダー | タイプ |
|---------|--------|----------------|--------|
| 📝 | 出来事 | 今日起きた出来事を書いてください... | テキストエリア |
| 💭 | 感情 | 今日の気持ちや感情を書いてください... | テキストエリア |
| 😊 | よかったこと | 今日よかったことを書いてください... | テキストエリア |
| 🤔 | 反省点 | 今日の反省点や改善したいことを書いてください... | テキストエリア |
| 🙏 | 感謝したこと | 今日感謝したことを書いてください... | テキストエリア |
| 🎯 | 明日の目標 | 明日の目標を書いてください... | テキストエリア |
| ✨ | 明日の楽しみ | 明日楽しみにしていることを書いてください... | テキストエリア |
| 💡 | 学んだこと・気づき | 今日学んだことや気づきを書いてください... | テキストエリア |
| 💪 | 健康・習慣チェック | 運動、食事、睡眠などの健康管理について書いてください... | テキストエリア |
| 🏷️ | 今日を一言で表すなら | 今日という日を一言で表現してください... | テキストエリア |

##### 画像アップロード
- **UI要素**:
  - ファイル選択ボタン
  - 選択中のファイル名表示
  - プレビュー画像（選択後）
  - 削除ボタン（選択後）
- **制約表示**: 「5MB以下の画像ファイル」

##### 音声アップロード
- **UI要素**:
  - ファイル選択ボタン
  - 選択中のファイル名表示
  - 音声再生コントロール（選択後）
  - 削除ボタン（選択後）
- **制約表示**: 「10MB以下の音声ファイル（MP3, WAV, OGG, M4A, AAC, WebM）」

##### 公開設定
- **タイプ**: チェックボックス
- **ラベル**: 「この日記を公開する」
- **デフォルト値**: 未チェック（非公開）
- **説明**: 「公開すると他のユーザーも閲覧できます」

##### 保存ボタン
- **ラベル**: 「保存する」
- **状態**:
  - 通常: 青色
  - 送信中: グレー、「保存中...」表示
  - 成功: 緑色で一瞬表示後、フォームクリア
  - エラー: 赤色、エラーメッセージ表示

#### 3.3.4 日記一覧

##### 一覧表示形式
- **ソート順**: 日付降順、作成日時降順
- **表示件数**: 全件（ユーザー自身の日記のみ）
- **更新方式**: APIポーリングまたはフォーム送信後の再フェッチ

##### エントリーカード
各日記エントリーは以下の情報を含むカードで表示

| 要素 | 説明 | 表示条件 |
|------|------|----------|
| 日付 | 「YYYY年MM月DD日 (曜日)」形式 | 常時 |
| 天気アイコン | 絵文字表示 | 天気情報がある場合 |
| 公開ステータス | 「公開中」/「非公開」バッジ | 常時 |
| メインコンテンツ | テキスト表示 | コンテンツがある場合 |
| 詳細項目 | アイコン + ラベル + 内容 | 各項目に値がある場合 |
| 画像 | サムネイル表示（クリックで拡大） | 画像がある場合 |
| 音声 | 再生コントロール | 音声がある場合 |
| 作成日時 | タイムスタンプ（相対時間） | 常時 |

##### アクションボタン
- **公開/非公開切替**:
  - 現在の状態に応じてラベル変更
  - クリックで即座に切り替え
- **削除**:
  - クリックで確認ダイアログ表示（モーダルの背景は `bg-black/50` で半透明）
  - 確認後に削除実行

---

### SC-004: みんなの日記画面

#### 3.4.1 概要
- **目的**: 公開設定された日記を閲覧する
- **アクセス条件**: 全ユーザー（認証不要）
- **パス**: `/public`

#### 3.4.2 画面構成
```
┌─────────────────────────────────────────────────┐
│ ヘッダー                                         │
├─────────────────────────────────────────────────┤
│ 【公開日記一覧】                                 │
│ ┌─────────────────────────────────────────────┐ │
│ │ 👤 山田太郎                                   │ │
│ │ 2026年2月19日 (木) ☀️                        │ │
│ │ ────────────────────────────────            │ │
│ │ 今日は素晴らしい一日でした...                 │ │
│ │                                              │ │
│ │ 📝 出来事: プロジェクト完了                   │ │
│ │ 💭 感情: 達成感がある                         │ │
│ │ ...                                          │ │
│ │                                              │ │
│ │ [画像サムネイル]                              │ │
│ │ [🔊 音声再生]                                 │ │
│ └─────────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────────┐ │
│ │ 👤 佐藤花子                                   │ │
│ │ 2026年2月18日 (水) ☁️                        │ │
│ │ ...                                          │ │
│ └─────────────────────────────────────────────┘ │
│                                                 │
│ [もっと読み込む] ※将来の機能                     │
└─────────────────────────────────────────────────┘
```

#### 3.4.3 UI要素

##### 投稿者情報
- **プロフィール画像**: 円形アイコン（40px × 40px）
- **表示名**: 投稿者の表示名
- **デフォルト画像**: プロフィール画像がない場合はイニシャルアイコン

##### エントリー表示
- マイ日記画面と同様のカード形式
- 削除・編集機能は非表示
- 投稿者情報を追加表示

##### 表示順・件数
- **ソート順**: 作成日時降順
- **表示件数**: 最新50件

---

## 4. レスポンシブデザイン

### 4.1 ブレークポイント（TailwindCSS v4）
- **デスクトップ**: `lg` (1024px以上)
- **タブレット**: `md` (768px - 1023px)
- **モバイル**: `sm` (640px以下)

### 4.2 モバイル表示時の変更点
- カレンダーのサイズ縮小
- フォーム要素の幅を100%に
- 画像・音声プレビューのサイズ調整
- ボタンの配置を縦並びに変更
- ヘッダーのナビゲーションをハンバーガーメニュー化

---

## 5. ローディング・エラー表示

### 5.1 ローディング状態
- **初期ロード**: Next.js の `loading.tsx` ファイルによるローディングUI表示
- **日記ロード**: スケルトンUI または「読み込み中...」スピナー表示
- **ファイルアップロード**: 「アップロード中...」プログレス表示
- **保存中**: ボタンを無効化し「保存中...」表示

### 5.2 エラー表示
- **認証エラー**: 赤色のアラートメッセージ
- **アップロードエラー**: フォーム上部に赤色のエラーバナー
- **削除エラー**: トーストメッセージ
- **ネットワークエラー**: 「接続に失敗しました」メッセージ
- **ページエラー**: Next.js の `error.tsx` ファイルによるエラーUI表示

---

## 6. アニメーション・トランジション

### 6.1 UI要素
- ボタンのホバー時の拡大（1.05倍、200ms）
- モーダル・ダイアログの表示（スケールアップ、250ms）  
  ※ モーダル背景は `bg-black/50` で半透明
- カードの削除時のフェードアウト（300ms）

### 6.2 フィードバック
- 保存成功時のチェックマークアニメーション
- エラー時のシェイクアニメーション

---

**文書作成日**: 2026年2月19日  
**バージョン**: 1.0
